import{c as W,r as n,j as e,m as f,B as g,C as z}from"./index-Dbl9gluG.js";import{u as E,G as F,a as S}from"./useGameQuestions-sVK4q6BI.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=W("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);function T({subjectId:i,unitId:m}){const{guessword:j}=E(i,m),[x,w]=n.useState(0),[k,h]=n.useState([]),[a,u]=n.useState([]),[b,y]=n.useState(0),[G,v]=n.useState(!1),[p,C]=n.useState(!1),[l,N]=n.useState(null),c=j?j.slice(0,10):[],d=c[x],o=(d==null?void 0:d.answer.toUpperCase().replace(/\s/g,""))||"";n.useEffect(()=>{if(p&&o){const t=o.split("").map((s,r)=>({char:s,id:r,used:!1}));h(t.sort(()=>Math.random()-.5)),u([]),N(null)}},[x,p,o]);const L=t=>{l||(h(s=>s.map(r=>r.id===t.id?{...r,used:!0}:r)),u(s=>[...s,t]))},A=()=>{if(a.length===0||l)return;const t=a[a.length-1];h(s=>s.map(r=>r.id===t.id?{...r,used:!1}:r)),u(s=>s.slice(0,-1))},U=()=>{l||(h(t=>t.map(s=>({...s,used:!1}))),u([]))},R=()=>{const s=a.map(r=>r.char).join("")===o;N(s?"correct":"wrong"),s&&y(r=>r+1),setTimeout(()=>{x+1>=c.length?v(!0):w(r=>r+1)},1500)},H=a.length===o.length;return G?e.jsx(F,{score:b,maxScore:c.length,gameName:"Guess the Word",subjectId:i,unitId:m,onRetry:()=>{w(0),y(0),v(!1),C(!1)}}):p?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(S,{title:"Guess the Word",subjectId:i,unitId:m,score:b,maxScore:c.length}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Level ",x+1," of ",c.length]}),e.jsx("p",{className:"text-xl font-medium max-w-lg",children:d==null?void 0:d.question})]}),e.jsx("div",{className:"flex gap-2 flex-wrap justify-center",children:Array.from({length:o.length}).map((t,s)=>{var r;return e.jsx(f.div,{className:`w-12 h-14 flex items-center justify-center text-2xl font-bold rounded-lg border-2
                ${a[s]?l==="correct"?"border-green-500 bg-green-500/20":l==="wrong"?"border-game-red bg-game-red/20":"border-primary bg-primary/20":"border-dashed border-muted-foreground/50"}`,initial:!1,animate:{scale:a[s]?[1,1.1,1]:1},children:((r=a[s])==null?void 0:r.char)||""},s)})}),l&&e.jsx(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex items-center gap-2 font-bold text-lg ${l==="correct"?"text-green-500":"text-game-red"}`,children:l==="correct"?e.jsxs(e.Fragment,{children:[e.jsx(z,{size:24}),"Correct!"]}):e.jsxs(e.Fragment,{children:["Correct answer: ",o]})}),!l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex gap-2 flex-wrap justify-center max-w-md",children:k.map(t=>e.jsx(f.button,{onClick:()=>L(t),disabled:t.used,className:`w-12 h-14 flex items-center justify-center text-2xl font-bold rounded-lg border-2 transition-all
                    ${t.used?"border-muted bg-muted/50 text-muted-foreground cursor-not-allowed":"border-game-yellow bg-game-yellow text-game-navy cursor-pointer hover:scale-105"}`,whileHover:{scale:t.used?1:1.05},whileTap:{scale:t.used?1:.95},children:t.char},t.id))}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(g,{variant:"outline",onClick:A,disabled:a.length===0,className:"gap-2",children:[e.jsx(M,{size:18}),"Undo"]}),e.jsx(g,{variant:"outline",onClick:U,disabled:a.length===0,children:"Clear"}),H&&e.jsx(g,{onClick:R,children:"Check Answer"})]})]})]})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(S,{title:"Guess the Word",subjectId:i,unitId:m}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”¤"}),e.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:"How to Play"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Unscramble the letters to spell the correct answer. Click letters in the right order to form the word."}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:[c.length," words to guess"]}),e.jsx(g,{size:"lg",onClick:()=>C(!0),children:"Start Game"})]})})]})}export{T as default};
