import{r as n,j as e,m as b,a as T,B as S,I as R}from"./index-DXGNgIhw.js";import{u as F,G as O,a as C}from"./useGameQuestions-DrhFKWZ7.js";const q=[{label:"60 seconds",value:60},{label:"2 minutes",value:120},{label:"3 minutes",value:180}];function D({subjectId:i,unitId:c}){const{questions:G}=F(i,c),[l,u]=n.useState(0),[o,p]=n.useState([]),[k,x]=n.useState(0),[E,N]=n.useState(null),[r,y]=n.useState(!1),[f,d]=n.useState(!1),[h,g]=n.useState(!1),j=n.useRef(null),a=G.slice(0,10);n.useEffect(()=>{if(r&&!f&&!h){const s=setInterval(()=>{x(t=>t<=1?(d(!0),0):t-1)},1e3);return()=>clearInterval(s)}},[r,f,h]),n.useEffect(()=>{r&&j.current&&j.current.focus()},[l,r]);const A=s=>{N(s),x(s),p(new Array(a.length).fill("")),u(0),y(!0),d(!1),g(!1)},B=s=>{const t=[...o];t[l]=s,p(t)},w=()=>{l+1>=a.length?a.every((t,m)=>o[m].toLowerCase().trim()===t.answer.toLowerCase().trim())?g(!0):(u(0),x(E||60)):u(s=>s+1)},L=s=>{s.key==="Enter"&&w()},Q=()=>a.filter((s,t)=>{var m;return((m=o[t])==null?void 0:m.toLowerCase().trim())===s.answer.toLowerCase().trim()}).length;if(f||h)return e.jsx(O,{score:Q(),maxScore:a.length,gameName:"Fill in the Blanks",subjectId:i,unitId:c,onRetry:()=>{y(!1),d(!1),g(!1),N(null)}});if(!r)return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(C,{title:"Fill in the Blanks",subjectId:i,unitId:c}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“"}),e.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:"How to Play"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Answer all ",a.length," questions before time runs out. If you don't finish in time, you'll start over from question 1!"]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-4 flex items-center justify-center gap-2",children:[e.jsx(T,{size:16}),"Choose your time limit:"]}),e.jsx("div",{className:"flex flex-col gap-2",children:q.map(s=>e.jsx(S,{variant:"outline",size:"lg",onClick:()=>A(s.value),className:"w-full",children:s.label},s.value))})]})]})})]});const v=a[l];return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(C,{title:"Fill in the Blanks",subjectId:i,unitId:c,score:l,maxScore:a.length,timeLeft:k}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Question ",l+1," of ",a.length]}),e.jsx("div",{className:"flex gap-1 mb-6",children:a.map((s,t)=>e.jsx("div",{className:`w-3 h-3 rounded-full ${t<l?"bg-primary":t===l?"bg-game-yellow":"bg-muted"}`},t))})]}),e.jsxs(b.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"w-full max-w-xl bg-card p-8 rounded-2xl border-2 border-border",children:[e.jsx("p",{className:"text-lg mb-6",children:v==null?void 0:v.question}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx(R,{ref:j,value:o[l]||"",onChange:s=>B(s.target.value),onKeyDown:L,placeholder:"Type your answer...",className:"text-lg h-14"})}),e.jsx(S,{onClick:w,className:"w-full",size:"lg",children:l+1>=a.length?"Submit All":"Next Question"})]})]},l),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Press Enter to submit"})]})]})}export{D as default};
