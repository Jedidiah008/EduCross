import{r as n,j as e,m as x,B as d,L as P,I as A,C as M,X as q}from"./index-Dbl9gluG.js";import{u as B,G as D,a as k}from"./useGameQuestions-sVK4q6BI.js";function X({subjectId:c,unitId:o}){const{conceptpuzzle:p}=B(c,o),[i,g]=n.useState(0),[h,j]=n.useState(""),[l,y]=n.useState(0),[N,w]=n.useState(null),[r,b]=n.useState(null),[v,z]=n.useState(0),[R,C]=n.useState(!1),[u,S]=n.useState(!1),f=n.useRef(null);let a=p?[...p]:[];c==="chemistry-1"&&o==="chem1-unit1"&&a.length>=6&&(a[5]={question:"An ionized gas consisting of positive ions and free electrons in proportions resulting in more or less no overall electric charge.",answer:"Plasma",hints:["First letter: P","6 letters"]});const t=a[i],m=(t==null?void 0:t.hints)||[];n.useEffect(()=>{u&&f.current&&f.current.focus()},[i,u,r]);const H=()=>{l<m.length&&(w(m[l]),y(s=>s+1))},G=()=>{if(!h.trim())return;const s=h.toLowerCase().trim()===(t==null?void 0:t.answer.toLowerCase().trim());if(b(s?"correct":"wrong"),s){const E=Math.max(1,3-l);z(U=>U+E)}},L=()=>{i+1>=a.length?C(!0):(g(s=>s+1),j(""),y(0),w(null),b(null))},F=s=>{s.key==="Enter"&&!r&&G()};return R?e.jsx(D,{score:v,maxScore:a.length*3,gameName:"Concept Puzzle",subjectId:c,unitId:o,onRetry:()=>{g(0),z(0),C(!1),S(!1)}}):u?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(k,{title:"Concept Puzzle",subjectId:c,unitId:o,score:v,maxScore:a.length*3}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 gap-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Puzzle ",i+1," of ",a.length]})}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-xl bg-card p-6 rounded-2xl border-2 border-border",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx("p",{className:"text-xl font-medium",children:t==null?void 0:t.question})}),N&&e.jsxs(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-game-yellow/20 border border-game-yellow rounded-lg flex items-center gap-2",children:[e.jsx(P,{className:"text-game-yellow flex-shrink-0",size:18}),e.jsx("p",{className:"text-sm",children:N})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(A,{ref:f,value:h,onChange:s=>j(s.target.value),onKeyDown:F,placeholder:"Type your answer...",className:"flex-1"}),e.jsx(d,{onClick:G,children:"Submit"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:H,disabled:l>=m.length,className:"gap-2",children:[e.jsx(P,{size:16}),"Get Hint (",m.length-l," left)"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Potential points: ",Math.max(1,3-l)]})]})]}),r&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[e.jsx("div",{className:`flex items-center justify-center gap-2 text-xl font-bold mb-4 ${r==="correct"?"text-green-500":"text-game-red"}`,children:r==="correct"?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:24}),"Correct! +",Math.max(1,3-l)," points"]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{size:24}),"Incorrect"]})}),r==="wrong"&&e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Correct answer: ",e.jsx("span",{className:"text-primary font-bold",children:t==null?void 0:t.answer})]}),e.jsx(d,{onClick:L,children:i+1>=a.length?"Finish":"Next Puzzle"})]})]},i)]})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(k,{title:"Concept Puzzle",subjectId:c,unitId:o}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ’¡"}),e.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:"How to Play"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Read the clue and guess the correct answer. Use hints if you're stuck, but each hint reduces your score!"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:[a.length," concepts to solve â€¢ 3 points each (minus hints)"]}),e.jsx(d,{size:"lg",onClick:()=>S(!0),children:"Start Game"})]})})]})}export{X as default};
