import{r as n,j as e,m as S,a as q,B as k,I as R}from"./index-Dbl9gluG.js";import{u as F,G as L,a as C}from"./useGameQuestions-sVK4q6BI.js";const O=[{label:"60 seconds",value:60},{label:"2 minutes",value:120},{label:"3 minutes",value:180}];function H({subjectId:i,unitId:c}){const{fillblanks:g}=F(i,c),[t,j]=n.useState(0),[o,v]=n.useState([]),[G,p]=n.useState(0),[z,N]=n.useState(null),[r,y]=n.useState(!1),[m,u]=n.useState(!1),[x,f]=n.useState(!1),d=n.useRef(null),a=g?g.slice(0,10):[];n.useEffect(()=>{if(r&&!m&&!x){const s=setInterval(()=>{p(l=>l<=1?(u(!0),0):l-1)},1e3);return()=>clearInterval(s)}},[r,m,x]),n.useEffect(()=>{r&&d.current&&d.current.focus()},[t,r]);const E=s=>{N(s),p(s),v(new Array(a.length).fill("")),j(0),y(!0),u(!1),f(!1)},T=s=>{const l=[...o];l[t]=s,v(l)},b=()=>{t+1>=a.length?f(!0):j(s=>s+1)},A=s=>{s.key==="Enter"&&b()},B=()=>a.filter((s,l)=>{var w;return((w=o[l])==null?void 0:w.toLowerCase().trim())===s.answer.toLowerCase().trim()}).length;if(m||x)return e.jsx(L,{score:B(),maxScore:a.length,gameName:"Fill in the Blanks",subjectId:i,unitId:c,onRetry:()=>{y(!1),u(!1),f(!1),N(null)}});if(!r)return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(C,{title:"Fill in the Blanks",subjectId:i,unitId:c}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“"}),e.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:"How to Play"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:["Answer all ",a.length," questions. You can finish the game once you've answered every question, before or after the timer runs out!"]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-4 flex items-center justify-center gap-2",children:[e.jsx(q,{size:16}),"Choose your time limit:"]}),e.jsx("div",{className:"flex flex-col gap-2",children:O.map(s=>e.jsx(k,{variant:"outline",size:"lg",onClick:()=>E(s.value),className:"w-full",children:s.label},s.value))})]})]})})]});const h=a[t],Q=h&&(h.question||h.sentence)||"";return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(C,{title:"Fill in the Blanks",subjectId:i,unitId:c,score:t,maxScore:a.length,timeLeft:G}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Question ",t+1," of ",a.length]}),e.jsx("div",{className:"flex gap-1 mb-6",children:a.map((s,l)=>e.jsx("div",{className:`w-3 h-3 rounded-full ${l<t?"bg-primary":l===t?"bg-game-yellow":"bg-muted"}`},l))})]}),e.jsxs(S.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"w-full max-w-xl bg-card p-8 rounded-2xl border-2 border-border",children:[e.jsx("p",{className:"text-lg mb-6",children:Q}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx(R,{ref:d,value:o[t]||"",onChange:s=>T(s.target.value),onKeyDown:A,placeholder:"Type your answer...",className:"text-lg h-14"})}),e.jsx(k,{onClick:b,className:"w-full",size:"lg",children:t+1>=a.length?"Submit All":"Next Question"})]})]},t),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Press Enter to submit"})]})]})}export{H as default};
