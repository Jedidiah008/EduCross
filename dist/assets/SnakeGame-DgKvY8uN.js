import{c as B,r as a,j as e,m as E,B as v}from"./index-DXGNgIhw.js";import{u as K,G as J,a as T}from"./useGameQuestions-DrhFKWZ7.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=B("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=B("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),o=15,i=28;function se({subjectId:w,unitId:j}){const{questions:f}=K(w,j),[y,G]=a.useState(0),[F,R]=a.useState([{x:7,y:7}]),[I,$]=a.useState({x:1,y:0}),[b,A]=a.useState([]),[k,D]=a.useState(""),[p,N]=a.useState(!1),[L,z]=a.useState(!1),[P,U]=a.useState(0),[m,_]=a.useState(!1),[d,H]=a.useState(200),O=a.useRef(),x=a.useRef(I),u=f[y],c=(u==null?void 0:u.answer.toUpperCase())||"",S=a.useCallback(()=>{if(!c)return;const s=[],t=new Set;t.add("7,7"),c.split("").forEach(l=>{let r;do r={x:Math.floor(Math.random()*o),y:Math.floor(Math.random()*o)};while(t.has(`${r.x},${r.y}`));t.add(`${r.x},${r.y}`),s.push({pos:r,char:l})});const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");for(let l=0;l<8;l++){let r;do r={x:Math.floor(Math.random()*o),y:Math.floor(Math.random()*o)};while(t.has(`${r.x},${r.y}`));t.add(`${r.x},${r.y}`),s.push({pos:r,char:n[Math.floor(Math.random()*n.length)]})}A(s)},[c]),M=a.useCallback(()=>{R([{x:7,y:7}]),$({x:1,y:0}),x.current={x:1,y:0},D(""),N(!1),S()},[S]);a.useEffect(()=>{m&&c&&S()},[y,m,S,c]),a.useEffect(()=>{const s=t=>{if(!m||p)return;const n={...x.current};switch(t.key){case"ArrowUp":x.current.y!==1&&(n.x=0,n.y=-1);break;case"ArrowDown":x.current.y!==-1&&(n.x=0,n.y=1);break;case"ArrowLeft":x.current.x!==1&&(n.x=-1,n.y=0);break;case"ArrowRight":x.current.x!==-1&&(n.x=1,n.y=0);break}x.current=n,$(n)};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[m,p]),a.useEffect(()=>{if(!m||p||L)return;const s=()=>{R(t=>{const n=t[0],l={x:n.x+x.current.x,y:n.y+x.current.y};if(l.x<0||l.x>=o||l.y<0||l.y>=o||t.some(h=>h.x===l.x&&h.y===l.y))return N(!0),t;const r=b.findIndex(h=>h.pos.x===l.x&&h.pos.y===l.y);if(r!==-1){const h=b[r],C=k+h.char;return D(C),A(g=>g.filter((Q,q)=>q!==r)),c.startsWith(C)?(C===c&&(U(g=>g+1),y+1>=f.length?z(!0):setTimeout(()=>{G(g=>g+1),M()},500)),[l,...t]):(N(!0),t)}return[l,...t.slice(0,-1)]})};return O.current=window.setInterval(s,d),()=>clearInterval(O.current)},[m,p,L,b,k,c,y,f.length,M,d]);const V=()=>{H(s=>Math.max(50,s-25))},W=()=>{H(s=>Math.min(400,s+25))},Z=()=>d<=100?"Very Fast":d<=150?"Fast":d<=200?"Normal":d<=300?"Slow":"Very Slow";return L?e.jsx(J,{score:P,maxScore:f.length,gameName:"Snake Game",subjectId:w,unitId:j,onRetry:()=>{G(0),U(0),z(!1),_(!1)}}):m?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(T,{title:"Snake Game",subjectId:w,unitId:j,score:P,maxScore:f.length}),e.jsxs("div",{className:"flex-1 flex items-center justify-center p-4 gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Level ",y+1]}),e.jsx("p",{className:"text-lg font-medium",children:u==null?void 0:u.question}),e.jsx("p",{className:"font-mono text-2xl text-primary mt-2 tracking-widest",children:k.padEnd(c.length,"_").split("").join(" ")})]}),e.jsxs("div",{className:"relative bg-card border-2 border-border rounded-lg overflow-hidden",style:{width:o*i,height:o*i},children:[e.jsx("div",{className:"absolute inset-0 grid",style:{gridTemplateColumns:`repeat(${o}, 1fr)`},children:Array.from({length:o*o}).map((s,t)=>e.jsx("div",{className:"border border-border/20"},t))}),b.map((s,t)=>e.jsx("div",{className:"absolute flex items-center justify-center font-bold text-lg bg-game-yellow text-game-navy rounded",style:{left:s.pos.x*i,top:s.pos.y*i,width:i,height:i},children:s.char},t)),F.map((s,t)=>e.jsx(E.div,{className:`absolute rounded ${t===0?"bg-primary":"bg-primary/70"}`,style:{left:s.x*i+2,top:s.y*i+2,width:i-4,height:i-4},initial:!1,animate:{scale:t===0?1:.9}},t))]}),p&&e.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[e.jsx("p",{className:"text-game-red font-bold text-xl mb-4",children:"Game Over!"}),e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Correct answer: ",c]}),e.jsx(v,{onClick:M,children:"Try Again"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use arrow keys ‚Üê ‚Üë ‚Üí ‚Üì to move"})]}),e.jsxs("div",{className:"bg-card border-2 border-border rounded-xl p-4 min-w-[160px]",children:[e.jsx("h3",{className:"font-display font-bold text-center mb-4",children:"Speed Settings"}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(v,{variant:"outline",size:"icon",onClick:V,disabled:d<=50,className:"w-10 h-10",children:e.jsx(Y,{size:20})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-lg",children:Z()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[d,"ms"]})]}),e.jsx(v,{variant:"outline",size:"icon",onClick:W,disabled:d>=400,className:"w-10 h-10",children:e.jsx(X,{size:20})})]})]})]})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(T,{title:"Snake Game",subjectId:w,unitId:j}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üêç"}),e.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:"How to Play"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Use arrow keys to control the snake. Eat letters in order to spell the answer. Don't hit the walls or eat wrong letters!"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:[f.length," levels to complete"]}),e.jsx(v,{size:"lg",onClick:()=>_(!0),children:"Start Game"})]})})]})}export{se as default};
