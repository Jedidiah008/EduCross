import{r as a,j as e,m as x,B as d,L as G,I as M,C as q,X as A}from"./index-DXGNgIhw.js";import{u as B,G as D,a as k}from"./useGameQuestions-DrhFKWZ7.js";function X({subjectId:c,unitId:o}){const{questions:P}=B(c,o),[i,p]=a.useState(0),[h,g]=a.useState(""),[l,j]=a.useState(0),[y,N]=a.useState(null),[n,w]=a.useState(null),[b,v]=a.useState(0),[R,C]=a.useState(!1),[u,z]=a.useState(!1),f=a.useRef(null),r=P.slice(0,10),t=r[i],m=(t==null?void 0:t.hints)||[];a.useEffect(()=>{u&&f.current&&f.current.focus()},[i,u,n]);const H=()=>{l<m.length&&(N(m[l]),j(s=>s+1))},S=()=>{if(!h.trim())return;const s=h.toLowerCase().trim()===(t==null?void 0:t.answer.toLowerCase().trim());if(w(s?"correct":"wrong"),s){const F=Math.max(1,3-l);v(U=>U+F)}},L=()=>{i+1>=r.length?C(!0):(p(s=>s+1),g(""),j(0),N(null),w(null))},E=s=>{s.key==="Enter"&&!n&&S()};return R?e.jsx(D,{score:b,maxScore:r.length*3,gameName:"Concept Puzzle",subjectId:c,unitId:o,onRetry:()=>{p(0),v(0),C(!1),z(!1)}}):u?e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(k,{title:"Concept Puzzle",subjectId:c,unitId:o,score:b,maxScore:r.length*3}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 gap-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Puzzle ",i+1," of ",r.length]})}),e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-xl bg-card p-6 rounded-2xl border-2 border-border",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsx("p",{className:"text-xl font-medium",children:t==null?void 0:t.question})}),y&&e.jsxs(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-game-yellow/20 border border-game-yellow rounded-lg flex items-center gap-2",children:[e.jsx(G,{className:"text-game-yellow flex-shrink-0",size:18}),e.jsx("p",{className:"text-sm",children:y})]}),!n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx(M,{ref:f,value:h,onChange:s=>g(s.target.value),onKeyDown:E,placeholder:"Type your answer...",className:"flex-1"}),e.jsx(d,{onClick:S,children:"Submit"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(d,{variant:"outline",size:"sm",onClick:H,disabled:l>=m.length,className:"gap-2",children:[e.jsx(G,{size:16}),"Get Hint (",m.length-l," left)"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Potential points: ",Math.max(1,3-l)]})]})]}),n&&e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[e.jsx("div",{className:`flex items-center justify-center gap-2 text-xl font-bold mb-4 ${n==="correct"?"text-green-500":"text-game-red"}`,children:n==="correct"?e.jsxs(e.Fragment,{children:[e.jsx(q,{size:24}),"Correct! +",Math.max(1,3-l)," points"]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{size:24}),"Incorrect"]})}),n==="wrong"&&e.jsxs("p",{className:"text-muted-foreground mb-4",children:["Correct answer: ",e.jsx("span",{className:"text-primary font-bold",children:t==null?void 0:t.answer})]}),e.jsx(d,{onClick:L,children:i+1>=r.length?"Finish":"Next Puzzle"})]})]},i)]})]}):e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(k,{title:"Concept Puzzle",subjectId:c,unitId:o}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ’¡"}),e.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:"How to Play"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Read the clue and guess the correct answer. Use hints if you're stuck, but each hint reduces your score!"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:[r.length," concepts to solve â€¢ 3 points each (minus hints)"]}),e.jsx(d,{size:"lg",onClick:()=>z(!0),children:"Start Game"})]})})]})}export{X as default};
